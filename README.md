# Android工作平台开发指南

[^作者]: 产品事业部 王一凡

[版本]: v2.0

 ***写在前面：***

*本文档根据《远大Android工作平台2.0》编写，目标是定义基础的设计开发理念，标准统一进而降低故障率和维护成本。*

*文档主要分为 Android文件命名与编写规范，基类与工具类api的说明，框架基本组件的定义与使用三大部分。提倡开发者遵循手册约定的编码规范和开发方式，熟练运用框架提供的api，避免重复申明对象、方法造成代码或逻辑冗余。*



# 第一章   开发规范

## 1.1  编码规范

### 1.1.1规范制定原则

- 方便代码的交流和维护。

- 不影响编码的效率，不与大众习惯冲突。

- 使代码更美观、阅读更方便。

- 使代码的逻辑更清晰、更易于理解。

### 1.1.2 IDE设置和快速格式化方式

`AndroidStudio`中设置代码格式化规范和注释规范，具体参考开发环境配置章节

代码格式化快捷键：`ctrl+shift+f`

代码注释快捷键：`ctrl+shift+/` 或者` ctrl+/`

### 1.1.3代码外观

类属性和类方法不要交叉放置，不同存取范围的属性或者方法也尽量不要交叉放置。格式：类定义

```
{ 
 类的公有属性定义
 类的保护属性定义
 类的私有属性定义
 类的公有方法定义
 类的保护方法定义
 类的私有方法定义
}
```

### 1.1.4列宽

代码列宽控制在110字符左右。以不出现横向滚动条为基准。

### 1.1.5换行

当表达式超出或即将超出规定的列宽，遵循以下规则进行换行：

- 在逗号后换行。

- 在操作符前换行。

- 规则1优先于规则2。

当以上规则会导致代码混乱的时候自己采取更灵活的换行规则。

### 1.1.6缩进

缩进应该是每行一个Tab(4个空格)，不要在代码中使用Tab字符。

### 1.1.7空行

空行是为了将逻辑上相关联的代码分块，以便提高代码的可阅读性。

在以下情况下使用两个空行：

- 接口和类的定义之间。

- 枚举和类的定义之间。

- 类与类的定义之间。    

在以下情况下使用一个空行：

- 方法与方法、属性与属性之间。
- 方法中变量声明与语句之间。
- 方法与方法之间。
- 方法中不同的逻辑块之间。
- 方法中的返回语句与其他的语句之间。
- 属性与方法、属性与字段、方法与字段之间。
- 注释与它注释的语句间不空行，但与其他的语句间空一行。如：

```
/**
  * 方法1
  */
public abstract void inData() throws IOException {}
    
/**
  * 方法2
  */
public abstract void outData() throws IOException {}
```

### 1.1.8空格

在以下情况中要使用到空格

- 关键字和左括符 “(” 应该用空格隔开。如：​   

```  try{
while (true){

}catch (Exception e){

}
```

- 多个参数用逗号隔开，每个逗号后都应加一个空格。

- 除此之外，所有的二元操作符都应用空格与它们的操作数隔开，一元操作符、++及--与操作数间不需要空格。如：

```
while (d++ = s++) {
	n++;
}

PrintSize(“size is “ + size + “\n”);

text.setText(a==true ? "正确" : "错误");
```

<font color="grey">**注：**在方法名和左括符 “(” 之间不要使用空格，这样有助于辨认代码中的方法调用与关键字。 </font>

### 1.1.9括号 - ()

- 左括号“(” 不要紧靠关键字，中间用一个空格隔开。

- 左括号“(” 与方法名之间不要添加任何空格。

- 没有必要的话不要在返回语句中使用()。如：

  ```return (1)```

### 1.1.10花括号 - {}

- 左花括号 “{” 放于关键字或方法名的同一行尾。如：

```
if (condition) {

}

public int add(int x, int y) {

}
```

- 左花括号 “{” 要与相应的右花括号 “}”对齐。

- 通常情况下左花括号 “{”接在行尾”}”单独成行，不与任何语句并列一行。

- if、while、do语句后一定要使用{}，即使{}号中为空或只有一条语句。如：

```
if (somevalue == 1) {
	somevalue = 2;
}
```

- 若折叠层次过多,右花括号 “}” 后建议加一个注释以便于方便的找到与之相应的 {。如：

```
while (1) {

if (valid) {

} // if valid
else{

} // not valid

} // end forever
```

## 1.2  命名规范

文件命名规范最终目的是为了让项目结构更加清晰易懂方便查找。

### 1.2.1约定空格

逗号隔开，每个逗号后都应 包名、文件夹名、类名、方法名都是以英文名为主，尽量按照驼峰式规则。

### 1.2.2约定

框架分为两个部分：核心类库层、业务层。

- 核心类库主要目录为`frame`，其中包含`action、acty、frags`等，还有一些第三方库。 

- 每个业务逻辑目录分为`action、actys、adapter、frgs、model、task、utils、db、views`等，分别对应业务逻辑处理、activity页面、数据适配器、fragment页面、对象模型、数据请求、工具、数据库、自定义控件。

### 1.2.3项目命名规范


- 框架包名为`com.sinoyd`，新项目**不允许**修改包名。
  新建项目后**必须**修改项目`Application ID`：

 ![avatar](https://wyf-wx.oss-cn-shanghai.aliyuncs.com/upload/0framedoc/ApplicationId.png)


- 个性化开发功能模块时要在`com.sinoyd`目录下创建以项目名缩写命名的目录。
  下图为Showcase项目结构：

 ![avatar](https://wyf-wx.oss-cn-shanghai.aliyuncs.com/upload/0framedoc/appTree.png)

### 1.2.4文件命名规范
